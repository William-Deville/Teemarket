{"version":3,"sources":["../../../src/server/controllers/poster.controller.js"],"names":["PosterModel","require","uploadErrors","ObjectId","Types","module","exports","readPoster","req","res","find","err","docs","send","console","log","createPoster","next","newPoster","picture","file","path","name","body","poster","save","status","json","updatePoster","isValid","params","id","updatedRecord","findByIdAndUpdate","$set","new","deletePoster","findByIdAndRemove"],"mappings":"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","sourcesContent":["const PosterModel = require('../models/poster.model');\r\nconst uploadErrors = require('../utils/errors.utils');\r\nconst ObjectId = require('mongoose').Types.ObjectId;\r\n\r\nmodule.exports.readPoster = (req, res) => {\r\n    PosterModel.find((err, docs) => {\r\n        if(!err) res.send(docs);\r\n        else console.log('Error to get data : ' + err);\r\n    })\r\n}\r\n\r\nmodule.exports.createPoster = async (req, res, next) => {\r\n    const newPoster = new PosterModel({\r\n        picture: req.file.path,\r\n        name: req.body.name,\r\n    });\r\n\r\n    try {\r\n        const poster = await newPoster.save();\r\n        return res.status(201).json(poster);\r\n    } catch (err) {\r\n        return res.status(400).send(err);\r\n    }\r\n};\r\n\r\nmodule.exports.updatePoster = (req, res) => {\r\n    if(!ObjectId.isValid(req.params.id))\r\n        return res.status(400).send('ID unknow : ' + req.params.id);\r\n\r\n    const updatedRecord = {\r\n        picture: req.body.picture,\r\n        name: req.body.name,\r\n    }\r\n\r\n    PosterModel.findByIdAndUpdate(\r\n        req.params.id,\r\n        { $set: updatedRecord },\r\n        { new: true },\r\n        (err, docs) => {\r\n            if(!err) res.send(docs);\r\n            else console.log(\"Update error : \" + err);\r\n        }\r\n    )\r\n}\r\n\r\nmodule.exports.deletePoster = (req, res) => {\r\n    if(!ObjectId.isValid(req.params.id))\r\n        return res.status(400).send('ID unknow : ' + req.params.id);\r\n\r\n        PosterModel.findByIdAndRemove(\r\n            req.params.id,\r\n            (err, docs) => {\r\n                if(!err) res.send(docs);\r\n                else console.log(\"Delete error : \" + err);\r\n            }\r\n            )\r\n}"],"file":"poster.controller.js"}